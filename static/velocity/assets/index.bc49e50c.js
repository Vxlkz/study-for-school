import{$ as Y,a as Oe,g as Ne,b as H,c as X,u as $e,i as v,d as _,t as D,e as G,m as et,f as je,h as U,j,k as R,o as Z,l as ie,n as Re,p as xe,s as Le,q as ne,F as oe,S as ae,r as tt,v as Ae,w as M,x as z,y as F,z as rt,A as se,_ as te,B as Be,C as nt,D as fe,E as ot,G as at,T as st}from"./index.23d2c538.js";import{F as Ve}from"./Favicon.dad3db96.js";import{C as B,r as Ee,a as lt,T as K,V as it,k as ct,b as dt}from"./index.5c288931.js";import{n as ut}from"./url.8f0b591e.js";import"./BareClient.06787bc0.js";const ye=Symbol("store-raw"),ce=Symbol("store-node"),ft=Symbol("store-name");function He(e,r){let t=e[Y];if(!t&&(Object.defineProperty(e,Y,{value:t=new Proxy(e,vt)}),!Array.isArray(e))){const n=Object.keys(e),o=Object.getOwnPropertyDescriptors(e);for(let a=0,i=n.length;a<i;a++){const s=n[a];o[s].get&&Object.defineProperty(e,s,{enumerable:o[s].enumerable,get:o[s].get.bind(t)})}}return t}function ge(e){let r;return e!=null&&typeof e=="object"&&(e[Y]||!(r=Object.getPrototypeOf(e))||r===Object.prototype||Array.isArray(e))}function de(e,r=new Set){let t,n,o,a;if(t=e!=null&&e[ye])return t;if(!ge(e)||r.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):r.add(e);for(let i=0,s=e.length;i<s;i++)o=e[i],(n=de(o,r))!==o&&(e[i]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):r.add(e);const i=Object.keys(e),s=Object.getOwnPropertyDescriptors(e);for(let c=0,m=i.length;c<m;c++)a=i[c],!s[a].get&&(o=e[a],(n=de(o,r))!==o&&(e[a]=n))}return e}function _e(e){let r=e[ce];return r||Object.defineProperty(e,ce,{value:r={}}),r}function we(e,r,t){return e[r]||(e[r]=Fe(t))}function gt(e,r){const t=Reflect.getOwnPropertyDescriptor(e,r);return!t||t.get||!t.configurable||r===Y||r===ce||r===ft||(delete t.value,delete t.writable,t.get=()=>e[Y][r]),t}function ze(e){if(Ne()){const r=_e(e);(r._||(r._=Fe()))()}}function bt(e){return ze(e),Reflect.ownKeys(e)}function Fe(e){const[r,t]=X(e,{equals:!1,internal:!0});return r.$=t,r}const vt={get(e,r,t){if(r===ye)return e;if(r===Y)return t;if(r===Oe)return ze(e),t;const n=_e(e),o=n.hasOwnProperty(r);let a=o?n[r]():e[r];if(r===ce||r==="__proto__")return a;if(!o){const i=Object.getOwnPropertyDescriptor(e,r);Ne()&&(typeof a!="function"||e.hasOwnProperty(r))&&!(i&&i.get)&&(a=we(n,r,a)())}return ge(a)?He(a):a},has(e,r){return r===ye||r===Y||r===Oe||r===ce||r==="__proto__"?!0:(this.get(e,r,e),r in e)},set(){return!0},deleteProperty(){return!0},ownKeys:bt,getOwnPropertyDescriptor:gt};function be(e,r,t,n=!1){if(!n&&e[r]===t)return;const o=e[r],a=e.length;t===void 0?delete e[r]:e[r]=t;let i=_e(e),s;(s=we(i,r,o))&&s.$(()=>t),Array.isArray(e)&&e.length!==a&&(s=we(i,"length",a))&&s.$(e.length),(s=i._)&&s.$()}function Ke(e,r){const t=Object.keys(r);for(let n=0;n<t.length;n+=1){const o=t[n];be(e,o,r[o])}}function pt(e,r){if(typeof r=="function"&&(r=r(e)),r=de(r),Array.isArray(r)){if(e===r)return;let t=0,n=r.length;for(;t<n;t++){const o=r[t];e[t]!==o&&be(e,t,o)}be(e,"length",n)}else Ke(e,r)}function re(e,r,t=[]){let n,o=e;if(r.length>1){n=r.shift();const i=typeof n,s=Array.isArray(e);if(Array.isArray(n)){for(let c=0;c<n.length;c++)re(e,[n[c]].concat(r),t);return}else if(s&&i==="function"){for(let c=0;c<e.length;c++)n(e[c],c)&&re(e,[c].concat(r),t);return}else if(s&&i==="object"){const{from:c=0,to:m=e.length-1,by:w=1}=n;for(let d=c;d<=m;d+=w)re(e,[d].concat(r),t);return}else if(r.length>1){re(e[n],r,[n].concat(t));return}o=e[n],t=[n].concat(t)}let a=r[0];typeof a=="function"&&(a=a(o,t),a===o)||n===void 0&&a==null||(a=de(a),n===void 0||ge(o)&&ge(a)&&!Array.isArray(a)?Ke(o,a):be(e,n,a))}function We(...[e,r]){const t=de(e||{}),n=Array.isArray(t),o=He(t);function a(...i){H(()=>{n&&i.length===1?pt(t,i[0]):re(t,i)})}return[o,a]}const mt=D('<div class="toolbarbutton-1 flex h-6 cursor-default select-none items-center gap-1 rounded px-1"><div class="h-[15px] w-[15px]"></div></div>');function ht(e){const{sortable:r,bookmark:t}=e;function n(o){Ee(t,o)}return(()=>{const o=mt.cloneNode(!0),a=o.firstChild;return o.$$contextmenu=i=>{i.data=[new B({text:"Open in new tab",onClick(s){Ee(t,s,!0)}}),new B({separator:!0}),new B({text:"Delete",onClick:()=>{lt(t)}}),new B({separator:!0})]},o.$$click=n,$e(r,o,()=>!0),v(a,_(Ve,{get src(){return X(t.icon||"about:newTab")[0]}})),v(o,()=>t.title,null),o})()}G(["click","contextmenu"]);var ve=class{x;y;width;height;constructor(e){this.x=Math.floor(e.x),this.y=Math.floor(e.y),this.width=Math.floor(e.width),this.height=Math.floor(e.height)}get rect(){return{x:this.x,y:this.y,width:this.width,height:this.height}}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get center(){return{x:this.x+this.width*.5,y:this.y+this.height*.5}}get corners(){return{topLeft:{x:this.left,y:this.top},topRight:{x:this.right,y:this.top},bottomRight:{x:this.left,y:this.bottom},bottomLeft:{x:this.right,y:this.bottom}}}},le=e=>{let r=new ve(e.getBoundingClientRect());const{transform:t}=getComputedStyle(e);return t&&(r=xt(r,t)),r},xt=(e,r)=>{let t,n;if(r.startsWith("matrix3d(")){const o=r.slice(9,-1).split(/, /);t=+o[12],n=+o[13]}else if(r.startsWith("matrix(")){const o=r.slice(7,-1).split(/, /);t=+o[4],n=+o[5]}else t=0,n=0;return new ve({...e,x:e.x-t,y:e.y-n})},V=()=>({x:0,y:0}),ke=(e,r)=>e.x===r.x&&e.y===r.y,me=(e,r)=>new ve({...e,x:e.x+r.x,y:e.y+r.y}),yt=(e,r)=>Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2)),wt=(e,r)=>{const t=Math.max(e.top,r.top),n=Math.max(e.left,r.left),o=Math.min(e.right,r.right),a=Math.min(e.bottom,r.bottom),i=o-n,s=a-t;if(n<o&&t<a){const c=e.width*e.height,m=r.width*r.height,w=i*s;return w/(c+m-w)}return 0},he=(e,r)=>e.x===r.x&&e.y===r.y&&e.width===r.width&&e.height===r.height,qe=(e,r,t)=>{const n=e.transformed.center,o={distance:1/0,droppable:null};for(const a of r){const i=yt(n,a.layout.center);i<o.distance?(o.distance=i,o.droppable=a):i===o.distance&&a.id===t.activeDroppableId&&(o.droppable=a)}return o.droppable},$t=(e,r,t)=>{const n=e.transformed,o={ratio:0,droppable:null};for(const a of r){const i=wt(n,a.layout);i>o.ratio?(o.ratio=i,o.droppable=a):i>0&&i===o.ratio&&a.id===t.activeDroppableId&&(o.droppable=a)}return o.droppable},Ue=Re(),Ye=e=>{const r=et({collisionDetector:$t},e),[t,n]=We({draggables:{},droppables:{},sensors:{},active:{draggableId:null,get draggable(){return t.active.draggableId!==null?t.draggables[t.active.draggableId]:null},droppableId:null,get droppable(){return t.active.droppableId!==null?t.droppables[t.active.droppableId]:null},sensorId:null,get sensor(){return t.active.sensorId!==null?t.sensors[t.active.sensorId]:null},overlay:null}}),o=(l,u,b)=>{l.substring(0,l.length-1),R(()=>t[l][u])&&n(l,u,"transformers",b.id,b)},a=(l,u,b)=>{l.substring(0,l.length-1),R(()=>t[l][u])&&(!R(()=>t[l][u].transformers[b])||n(l,u,"transformers",b,void 0))},i=({id:l,node:u,layout:b,data:A})=>{const y=t.draggables[l],x={id:l,node:u,layout:b,data:A,_pendingCleanup:!1};let S;if(!y)Object.defineProperties(x,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{if(t.active.overlay)return V();const P=Object.values(t.draggables[l].transformers);return P.sort((L,Q)=>L.order-Q.order),P.reduce((L,Q)=>Q.callback(L),V())}},transformed:{enumerable:!0,configurable:!0,get:()=>me(t.draggables[l].layout,t.draggables[l].transform)}});else if(t.active.draggableId===l&&!t.active.overlay){const P={x:y.layout.x-b.x,y:y.layout.y-b.y},L="addDraggable-existing-offset",Q=y.transformers[L],Se=Q?Q.callback(P):P;S={id:L,order:100,callback:Ce=>({x:Ce.x+Se.x,y:Ce.y+Se.y})},q(()=>a("draggables",l,L))}H(()=>{n("draggables",l,x),S&&o("draggables",l,S)}),t.active.draggable&&h()},s=l=>{!R(()=>t.draggables[l])||(n("draggables",l,"_pendingCleanup",!0),queueMicrotask(()=>c(l)))},c=l=>{if(t.draggables[l]?._pendingCleanup){const u=t.active.draggableId===l;H(()=>{u&&n("active","draggableId",null),n("draggables",l,void 0)})}},m=({id:l,node:u,layout:b,data:A})=>{const y=t.droppables[l],x={id:l,node:u,layout:b,data:A,_pendingCleanup:!1};y||Object.defineProperties(x,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{const S=Object.values(t.droppables[l].transformers);return S.sort((P,L)=>P.order-L.order),S.reduce((P,L)=>L.callback(P),V())}},transformed:{enumerable:!0,configurable:!0,get:()=>me(t.droppables[l].layout,t.droppables[l].transform)}}),n("droppables",l,x),t.active.draggable&&h()},w=l=>{!R(()=>t.droppables[l])||(n("droppables",l,"_pendingCleanup",!0),queueMicrotask(()=>d(l)))},d=l=>{if(t.droppables[l]?._pendingCleanup){const u=t.active.droppableId===l;H(()=>{u&&n("active","droppableId",null),n("droppables",l,void 0)})}},f=({id:l,activators:u})=>{n("sensors",l,{id:l,activators:u,coordinates:{origin:{x:0,y:0},current:{x:0,y:0},get delta(){return{x:t.sensors[l].coordinates.current.x-t.sensors[l].coordinates.origin.x,y:t.sensors[l].coordinates.current.y-t.sensors[l].coordinates.origin.y}}}})},p=l=>{if(!R(()=>t.sensors[l]))return;const u=t.active.sensorId===l;H(()=>{u&&n("active","sensorId",null),n("sensors",l,void 0)})},g=({node:l,layout:u})=>{const b=t.active.overlay,A={node:l,layout:u};b||Object.defineProperties(A,{id:{enumerable:!0,configurable:!0,get:()=>t.active.draggable?.id},data:{enumerable:!0,configurable:!0,get:()=>t.active.draggable?.data},transformers:{enumerable:!0,configurable:!0,get:()=>Object.fromEntries(Object.entries(t.active.draggable?t.active.draggable.transformers:{}).filter(([y])=>y!=="addDraggable-existing-offset"))},transform:{enumerable:!0,configurable:!0,get:()=>{const y=Object.values(t.active.overlay?t.active.overlay.transformers:[]);return y.sort((x,S)=>x.order-S.order),y.reduce((x,S)=>S.callback(x),V())}},transformed:{enumerable:!0,configurable:!0,get:()=>t.active.overlay?me(t.active.overlay.layout,t.active.overlay.transform):new ve({x:0,y:0,width:0,height:0})}}),n("active","overlay",A)},E=()=>n("active","overlay",null),$=(l,u)=>{H(()=>{n("sensors",l,"coordinates",{origin:{...u},current:{...u}}),n("active","sensorId",l)})},C=l=>{const u=t.active.sensorId;!u||n("sensors",u,"coordinates","current",{...l})},N=()=>n("active","sensorId",null),k=(l,u)=>{const b={};for(const y of Object.values(t.sensors))if(y)for(const[x,S]of Object.entries(y.activators))b[x]??=[],b[x].push({sensor:y,activator:S});const A={};for(const y in b){let x=y;u&&(x=`on${y}`),A[x]=S=>{for(const{activator:P}of b[y]){if(t.active.sensor)break;P(S,l)}}}return A},h=()=>{let l=!1;const u=Object.values(t.draggables),b=Object.values(t.droppables),A=t.active.overlay;return H(()=>{const y=new WeakMap;for(const x of u)if(x){const S=x.layout;y.has(x.node)||y.set(x.node,le(x.node));const P=y.get(x.node);he(S,P)||(n("draggables",x.id,"layout",P),l=!0)}for(const x of b)if(x){const S=x.layout;y.has(x.node)||y.set(x.node,le(x.node));const P=y.get(x.node);he(S,P)||(n("droppables",x.id,"layout",P),l=!0)}if(A){const x=A.layout,S=le(A.node);he(x,S)||(n("active","overlay","layout",S),l=!0)}}),l},I=()=>{const l=t.active.overlay??t.active.draggable;if(l){const u=r.collisionDetector(l,Object.values(t.droppables),{activeDroppableId:t.active.droppableId}),b=u?u.id:null;t.active.droppableId!==b&&n("active","droppableId",b)}},O=l=>{const u={id:"sensorMove",order:0,callback:b=>t.active.sensor?{x:b.x+t.active.sensor.coordinates.delta.x,y:b.y+t.active.sensor.coordinates.delta.y}:b};h(),H(()=>{n("active","draggableId",l),o("draggables",l,u)}),I()},T=()=>{const l=R(()=>t.active.draggableId);H(()=>{l!==null&&a("draggables",l,"sensorMove"),n("active",["draggableId","droppableId"],null)}),h()},W=l=>{j(()=>{const u=t.active.draggable;u&&R(()=>l({draggable:u}))})},J=l=>{j(()=>{const u=t.active.draggable;if(u){const b=R(()=>t.active.overlay);Object.values(b?b.transform:u.transform),R(()=>l({draggable:u,overlay:b}))}})},ue=l=>{j(()=>{const u=t.active.draggable,b=t.active.droppable;u&&R(()=>l({draggable:u,droppable:b,overlay:t.active.overlay}))})},q=l=>{j(({previousDraggable:u,previousDroppable:b,previousOverlay:A})=>{const y=t.active.draggable,x=y?t.active.droppable:null,S=y?t.active.overlay:null;return!y&&u&&R(()=>l({draggable:u,droppable:b,overlay:A})),{previousDraggable:y,previousDroppable:x,previousOverlay:S}},{previousDraggable:null,previousDroppable:null,previousOverlay:null})};J(()=>I()),r.onDragStart&&W(r.onDragStart),r.onDragMove&&J(r.onDragMove),r.onDragOver&&ue(r.onDragOver),r.onDragEnd&&q(r.onDragEnd);const pe=[t,{addTransformer:o,removeTransformer:a,addDraggable:i,removeDraggable:s,addDroppable:m,removeDroppable:w,addSensor:f,removeSensor:p,setOverlay:g,clearOverlay:E,recomputeLayouts:h,detectCollisions:I,draggableActivators:k,sensorStart:$,sensorMove:C,sensorEnd:N,dragStart:O,dragEnd:T,onDragStart:W,onDragMove:J,onDragOver:ue,onDragEnd:q}];return _(Ue.Provider,{value:pe,get children(){return r.children}})},ee=()=>je(Ue)||null,_t=(e="pointer-sensor")=>{const[r,{addSensor:t,removeSensor:n,sensorStart:o,sensorMove:a,sensorEnd:i,dragStart:s,dragEnd:c}]=ee(),m=250,w=10;Z(()=>{t({id:e,activators:{pointerdown:E}})}),ie(()=>{n(e)});const d=()=>r.active.sensorId===e,f={x:0,y:0};let p=null,g=null;const E=(I,O)=>{I.button===0&&(document.addEventListener("pointermove",N),document.addEventListener("pointerup",k),g=O,f.x=I.clientX,f.y=I.clientY,p=window.setTimeout(C,m))},$=()=>{p&&(clearTimeout(p),p=null),document.removeEventListener("pointermove",N),document.removeEventListener("pointerup",k),document.removeEventListener("selectionchange",h)},C=()=>{r.active.sensor?d()||$():(o(e,f),s(g),h(),document.addEventListener("selectionchange",h))},N=I=>{const O={x:I.clientX,y:I.clientY};if(!r.active.sensor){const T={x:O.x-f.x,y:O.y-f.y};Math.sqrt(T.x**2+T.y**2)>w&&C()}d()&&(I.preventDefault(),a(O))},k=I=>{$(),d()&&(I.preventDefault(),c(),i())},h=()=>{window.getSelection()?.removeAllRanges()}},Xe=e=>(_t(),U(()=>e.children)),Ie=e=>({transform:`translate3d(${e.x}px, ${e.y}px, 0)`}),kt=(e,r={})=>{const[t,{addDraggable:n,removeDraggable:o,draggableActivators:a}]=ee(),[i,s]=X(null);Z(()=>{const d=i();d&&n({id:e,node:d,layout:le(d),data:r})}),ie(()=>o(e));const c=()=>t.active.draggableId===e,m=()=>t.draggables[e]?.transform||V();return Object.defineProperties((d,f)=>{const p=f?f():{};j(()=>{const g=i(),E=a(e);if(g)for(const $ in E)g.addEventListener($,E[$]);ie(()=>{if(g)for(const $ in E)g.removeEventListener($,E[$])})}),s(d),p.skipTransform||j(()=>{const g=m();if(ke(g,V()))d.style.removeProperty("transform");else{const E=Ie(m());d.style.setProperty("transform",E.transform??null)}})},{ref:{enumerable:!0,value:s},isActiveDraggable:{enumerable:!0,get:c},dragActivators:{enumerable:!0,get:()=>a(e,!0)},transform:{enumerable:!0,get:m}})},It=(e,r={})=>{const[t,{addDroppable:n,removeDroppable:o}]=ee(),[a,i]=X(null);Z(()=>{const w=a();w&&n({id:e,node:w,layout:le(w),data:r})}),ie(()=>o(e));const s=()=>t.active.droppableId===e,c=()=>t.droppables[e]?.transform||V();return Object.defineProperties((w,d)=>{const f=d?d():{};i(w),f.skipTransform||j(()=>{const p=c();if(ke(p,V()))w.style.removeProperty("transform");else{const g=Ie(c());w.style.setProperty("transform",g.transform??null)}})},{ref:{enumerable:!0,value:i},isActiveDroppable:{enumerable:!0,get:s},transform:{enumerable:!0,get:c}})},Dt=(e,r,t)=>{const n=e.slice();return n.splice(t,0,...n.splice(r,1)),n},Ge=Re(),Je=e=>{const[r]=ee(),[t,n]=We({initialIds:[],sortedIds:[]}),o=s=>s>=0&&s<t.initialIds.length;j(()=>{n("initialIds",[...e.ids]),n("sortedIds",[...e.ids])}),j(()=>{r.active.draggableId&&r.active.droppableId?R(()=>{const s=t.sortedIds.indexOf(r.active.draggableId),c=t.initialIds.indexOf(r.active.droppableId);if(!o(s)||!o(c))n("sortedIds",[...e.ids]);else if(s!==c){const m=Dt(t.sortedIds,s,c);n("sortedIds",m)}}):n("sortedIds",[...e.ids])});const i=[t,{}];return _(Ge.Provider,{value:i,get children(){return e.children}})},St=()=>je(Ge)||null,Ct=(e,r)=>t=>{e(t),r(t)},Qe=(e,r={})=>{const[t,{addTransformer:n,removeTransformer:o}]=ee(),[a]=St(),i=kt(e,r),s=It(e,r),c=Ct(i.ref,s.ref),m=()=>a.initialIds.indexOf(e),w=()=>a.sortedIds.indexOf(e),d=$=>t.droppables[$]?.layout||null,f=()=>{const $=V(),C=m(),N=w();if(N!==C){const k=d(e),h=d(a.initialIds[N]);k&&h&&($.x=h.x-k.x,$.y=h.y-k.y)}return $},p={id:"sortableOffset",order:100,callback:$=>{const C=f();return{x:$.x+C.x,y:$.y+C.y}}};Z(()=>n("droppables",e,p)),ie(()=>o("droppables",e,p.id));const g=()=>(e===t.active.draggableId&&!t.active.overlay?t.draggables[e]?.transform:t.droppables[e]?.transform)||V();return Object.defineProperties($=>{i($,()=>({skipTransform:!0})),s($,()=>({skipTransform:!0})),j(()=>{const C=g();if(ke(C,V()))$.style.removeProperty("transform");else{const N=Ie(g());$.style.setProperty("transform",N.transform??null)}})},{ref:{enumerable:!0,value:c},transform:{enumerable:!0,get:g},isActiveDraggable:{enumerable:!0,get:()=>i.isActiveDraggable},dragActivators:{enumerable:!0,get:()=>i.dragActivators},isActiveDroppable:{enumerable:!0,get:()=>s.isActiveDroppable}})};function Ze(){const[,{onDragStart:e,onDragEnd:r,addTransformer:t,removeTransformer:n}]=ee(),o={id:"constrain-y-axis",order:100,callback:a=>({...a,y:0})};return e(({draggable:a})=>{t("draggables",a.id,o)}),r(({draggable:a})=>{n("draggables",a.id,o.id)}),[]}const Ot=D('<div id="PersonalToolbar" class="flex h-7 w-full items-center gap-2 px-2 text-[11px]"></div>');function At(){const e=({draggable:t,droppable:n})=>{if(t.node.classList.remove("z-20"),t&&n){const o=ne(),a=o.findIndex(s=>s.id===t.id),i=o.findIndex(s=>s.id===n.id);if(a!==i){const s=o.slice();s.splice(i,0,...s.splice(a,1)),tt(s)}}},r=({draggable:t})=>t.node.classList.add("z-20");return _(ae,{get when(){return xe()},get children(){const t=Ot.cloneNode(!0);return t.$$contextmenu=n=>{n.data||(n.data=[]),n.data.push(new B({text:"Hide bookmarks",onClick:()=>{Le(!1)}}))},v(t,_(Ye,{onDragEnd:e,onDragStart:r,collisionDetector:qe,get children(){return[_(Ze,{}),_(Xe,{}),_(Je,{get ids(){return ne().map(n=>n.id)},get children(){return _(oe,{get each(){return ne()},children:n=>{const o=Qe(n.id);return _(ht,{sortable:o,bookmark:n})}})}})]}})),t}})}G(["contextmenu"]);const Et=D("<div></div>"),Tt=D('<div class="flex h-full w-full items-center justify-center"><div class="top-50 left-50 relative min-w-[408px] flex-none rounded-lg bg-[#42414d] py-4 px-3 text-[#fbfbfe]"><div class="mb-2 select-none font-semibold"><i class="fa-light fa-globe mr-2"></i><span></span></div><div class="flex justify-end"></div></div></div>'),Mt=D('<p class=""></p>'),Pt=D("<button></button>");function Nt(){return(()=>{const e=Et.cloneNode(!0);return v(e,_(oe,{get each(){return Ae()},children:r=>_(ae,{get when(){return r.linkedTab===M()},get children(){const t=Tt.cloneNode(!0),n=t.firstChild,o=n.firstChild,a=o.firstChild,i=a.nextSibling,s=o.nextSibling;return v(i,()=>r.linkedTab.url().replace(/^https?:\/\/.*?\/(.*)$/,(c,m)=>c.replace(m,""))||"about:newTab"),v(n,_(oe,{get each(){return r.components.filter(c=>c.type==="text")},children:c=>(()=>{const m=Mt.cloneNode(!0);return v(m,()=>c.content),m})()}),s),v(s,_(oe,{get each(){return r.components.filter(c=>c.type==="button")},children:c=>(()=>{const m=Pt.cloneNode(!0);return m.$$click=()=>{r.close(),r.emit(c.id)},v(m,()=>c.text),z(()=>F(m,`m-1 rounded  py-[7px] px-[15px] font-semibold focus:outline focus:outline-[1.6px] focus:outline-offset-2 focus:outline-[#00ddff] ${c.style===0?"bg-[#00ddff] text-[#2b2a33]":"bg-[rgba(251,251,254,0.07)]"}`)),m})()})),t}})})),z(()=>F(e,`absolute top-0 left-0 z-20 h-full w-full bg-[rgba(28,27,34,0.45)] text-[12px] ${Ae().filter(r=>r.linkedTab===M()).length?"":"hidden"}`)),e})()}G(["click"]);const jt=D('<div class="h-4 w-4 overflow-hidden"><div id="tab-throbber" class="h-4 w-[960px]"></div></div>'),Rt=D("<div></div>"),Lt=D('<i class="fa-regular fa-volume mt-[2px] text-[10px]"></i>'),Bt=D('<div id="tab-background"><div class="h-4 w-4"></div><div><p class="w-full text-clip whitespace-nowrap text-xs font-light" style="-webkit-mask-image: linear-gradient(90deg, #000 0%, #000 calc(100% - 24px), transparent);mask-image: linear-gradient(90deg, #000 0%, #000 calc(100% - 24px), transparent);"></p></div><div><i class="fa-light fa-xmark mt-[2px] text-[10px]"></i></div></div>');function Vt(e){const{sortable:r}=e;return(()=>{const t=Bt.cloneNode(!0),n=t.firstChild,o=n.nextSibling,a=o.firstChild,i=o.nextSibling;return t.$$contextmenu=s=>{s.data=[new B({text:"New tab",onClick:()=>{new K("about:newTab",!0)}}),new B({separator:!0}),new B({text:"Reload",onClick:()=>{e.tab.reload()}}),new B({text:"Duplicate",onClick:()=>{new K(e.tab.url(),!0)}}),new B({separator:!0}),new B({text:"Close",onClick:()=>{e.tab.close()}})]},t.$$mousedown=s=>{s.button===0&&(e.tab.focus=!0)},$e(r,t,()=>!0),v(n,_(ae,{get when(){return e.tab.loading()},get children(){return jt.cloneNode(!0)}}),null),v(n,_(ae,{get when(){return!e.tab.loading()},get children(){const s=Rt.cloneNode(!0);return v(s,_(Ve,{get src(){return e.tab.icon}})),z(()=>F(s,`h-full w-full ${e.tab.small()&&e.tab.focus()?"hidden":""}`)),s}}),null),v(t,_(ae,{get when(){return e.tab.playing()},get children(){return Lt.cloneNode(!0)}}),o),v(a,()=>e.tab.title()),i.$$mousedown=s=>s.stopPropagation(),rt(i,"click",e.tab.close.bind(e.tab),!0),z(s=>{const c=`h-9 ${e.tab.pinned()||e.tab.small()?"":"w-48"} shadow-inner-lg  flex items-center gap-[5px] overflow-hidden rounded p-2 pr-1 text-sm`,m=e.tab.focus(),w=`flex-1 overflow-hidden ${e.tab.small()||e.tab.pinned()?"hidden":""}`,d=`close-icon flex h-6 w-6 items-center justify-center rounded hover:bg-opacity-50 ${e.tab.small()&&!e.tab.focus()||e.tab.pinned()?"hidden":""}`;return c!==s._v$&&F(t,s._v$=c),m!==s._v$2&&se(t,"data-active",s._v$2=m),w!==s._v$3&&F(o,s._v$3=w),d!==s._v$4&&F(i,s._v$4=d),s},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t})()}G(["mousedown","contextmenu","click"]);const Ht=D('<div class="flex" id="tabs" style="width: env(titlebar-area-width, 100%); min-height: env(titlebar-area-height, auto);margin-left: env(titlebar-area-x, 0);"><div class="flex h-11 w-full cursor-default  select-none items-center gap-1 overflow-hidden px-[2px]"><div class="flex items-center justify-center" id="opentab"><div class="toolbarbutton-1 flex h-9 w-9 items-center justify-center rounded"><i class="fa-regular fa-plus mt-[2px] text-xs"></i></div></div></div></div>');function zt(){const e=({draggable:n,droppable:o})=>{if(n.node.classList.remove("z-20"),n&&o){const a=fe(),i=a.findIndex(c=>c.id===n.id),s=a.findIndex(c=>c.id===o.id);if(i!==s){const c=a.slice();c.splice(s,0,...c.splice(i,1)),ot(c)}}},r=({draggable:n})=>n.node.classList.add("z-20");Z(async()=>{await te(()=>import("./registerProtocols.3c1182e5.js"),["assets/registerProtocols.3c1182e5.js","assets/index.5c288931.js","assets/BareClient.06787bc0.js","assets/index.23d2c538.js","assets/index.37d4b482.css","assets/url.8f0b591e.js"]);const o=new URLSearchParams(window.location.search).get("url"),a=JSON.parse(localStorage.getItem("tabs")||"[]");if(o)new K(o,!0),window.history.replaceState({},document.title,"/");else if(a.length&&Be()["general.startup.openPreviousTabs"]){const i=parseInt(localStorage.getItem("activeTab")||"0");a.forEach(c=>{new K(c,!1)});const s=Array.from(nt())[i];s&&(s.focus=!0)}else new K("about:newTab",!0)});function t(){new K("about:newTab",!0)}return(()=>{const n=Ht.cloneNode(!0),o=n.firstChild,a=o.firstChild,i=a.firstChild;return v(o,_(Ye,{onDragEnd:e,onDragStart:r,collisionDetector:qe,get children(){return[_(Ze,{}),_(Xe,{}),_(Je,{get ids(){return fe().map(s=>s.id)},get children(){return _(oe,{get each(){return fe()},children:s=>{const c=Qe(s.id);return _(Vt,{sortable:c,tab:s})}})}})]}}),a),i.$$click=t,n})()}G(["click"]);const Ft=D('<div><div class="flex grow flex-row items-center"></div><div></div></div>'),Kt=D('<i class="fa-light fa-chevron-right"></i>'),Wt=D('<hr class="my-1">'),qt=D('<div class="appmenu-separator-title my-1 select-none px-2 text-xs"></div>'),Ut=D("<div></div>"),Yt=D('<div class="relative bottom-0.5 flex h-10 cursor-default select-none flex-row items-center justify-center"><div class="absolute left-0 flex h-full w-8 items-center"><div class="popup-button flex h-8 w-8 items-center justify-center rounded"><i class="fa-light fa-chevron-left"></i></div></div><div class="flex h-full flex-row items-center"><div class="flex h-full flex-row items-center justify-center font-bold"></div></div> </div>'),Xt=D('<div class="popup absolute top-9 right-0.5 z-30 grid w-72 grid-cols-[1fr] rounded-lg border px-2 py-2 text-[0.9rem]"></div>'),Gt=D('<div class="fixed top-0 left-0 h-full w-full"></div>');function Jt(e){let r=X(null),t=[],n=(f,p,g,E=()=>{},$="")=>(()=>{const C=Ft.cloneNode(!0),N=C.firstChild,k=N.nextSibling;return C.$$click=h=>{f&&(E(h)??!0)&&w()},F(C,`popup-button flex h-8 w-full cursor-default select-none flex-row items-center rounded px-2 pt-[0.15rem] text-[12px] ${$}`),se(C,"data-disabled",!f),v(N,p),v(k,g),C})(),o=Object.fromEntries(e.map(f=>[f,X(null)])),a=(f,p,g)=>n(f,p,Kt.cloneNode(!0),()=>(t.push(g),r[1](g),!1)),i=(f,p,g)=>n(f,p,Velocity.getKeybind(g)?.toString(),()=>{w(),Velocity.getKeybind(g)?.callback()}),s=(f=null)=>[Wt.cloneNode(!0),f!==null?(()=>{const p=qt.cloneNode(!0);return v(p,f),p})():[]],c=(f,...p)=>(()=>{const g=Ut.cloneNode(!0);return v(g,p),z(()=>F(g,`col-start-1 row-start-1 flex h-full w-full flex-col ${r[0]()===f?"":"hidden"}`)),g})(),m=f=>[(()=>{const p=Yt.cloneNode(!0),g=p.firstChild,E=g.firstChild,$=g.nextSibling,C=$.firstChild;return E.$$click=()=>{t.pop(),r[1](t[t.length-1])},v(C,f),p})(),U(s)];function w(){r[1](null),t=["main"]}let d=(()=>{const f=Xt.cloneNode(!0);return v(f,()=>Object.values(o).map(p=>p[0]())),f})();return{container:d,element:U((()=>{const f=U(()=>r[0]()!==null);return()=>f()?[(()=>{const p=Gt.cloneNode(!0);return p.$$pointerdown=()=>w(),p})(),d]:null})()),close:w,current:r,stack:t,submenus:o,Menu:c,MenuItem:n,KeybindMenuItem:i,SubmenuMenuItem:a,MenuSeparator:s,SubmenuHeader:m}}G(["click","pointerdown"]);const Te=D('<div class="grow"><div class="h-full w-full"></div></div>'),Me=D('<div class="mb-0.5 mr-2 flex h-4 w-4 flex-row items-center"><img></div>'),Pe=D("<div></div>"),Qt=D('<div class="flex h-10 w-full items-center gap-2 p-2" id="browser-toolbar"><div class="flex items-center gap-1"><div class="toolbarbutton-1 flex h-8 w-8 items-center justify-center rounded"><i class="fa-light fa-arrow-left mt-[2px]"></i></div><div class="toolbarbutton-1 flex h-8 w-8 items-center justify-center rounded"><i class="fa-light fa-arrow-right mt-[2px]"></i></div><div class="toolbarbutton-1 flex h-8 w-8 items-center justify-center rounded"><i></i></div></div><div class="flex h-[32px] flex-1 items-center rounded text-sm" id="urlbar"><div class="mx-[2px] flex h-8 w-8 items-center justify-center rounded"><i class="fa-light fa-magnifying-glass mt-[2px]"></i></div><input id="url_bar" autocomplete="off" class="flex h-full flex-1 items-center rounded bg-transparent text-sm leading-8 focus:outline-none"></div><div class="flex items-center gap-1"><a target="_blank" aria-label="View source code on GitHub." href="https://github.com/cohenerickson/Velocity" class="cursor-default"><div class="toolbarbutton-1 flex h-8 w-8 items-center justify-center rounded"><i class="fa-brands fa-github mt-[2px] text-sm"></i></div></a><div class="toolbarbutton-1 relative flex h-8 w-8 items-center justify-center rounded"><i class="fa-light fa-bars mt-[2px] text-sm"></i></div></div></div>');function Zt(){function e(){M()?.loading()?M()?.stop():(M().search=!1,M()?.reload())}function r(){M().search=!1,M()?.goForward()}function t(){M().search=!1,M()?.goBack()}function n(k){k.addEventListener("keydown",h=>{h.key==="Enter"?(h.preventDefault(),k.value&&(M()?.navigate(k.value),M().search=!1,k.blur())):h.key==="Escape"?(M().search=!1,k.blur()):setTimeout(()=>M().search=k.value,0)})}let{element:o,container:a,close:i,current:s,stack:c,submenus:m,Menu:w,MenuItem:d,KeybindMenuItem:f,SubmenuMenuItem:p,MenuSeparator:g,SubmenuHeader:E}=Jt(["main","bookmarks","history","tools","help","recentTabs","recentWindows"]);j(()=>{m.main[1](w("main",f(!0,"New tab",{alias:"new_tab"}),f(!1,"New window",{alias:"new_window"}),g(),p(!0,"Bookmarks","bookmarks"),p(!0,"History","history"),f(!1,"Downloads",{alias:"open_downloads"}),d(!1,"Passwords",null,()=>{}),f(!1,"Add-ons and themes",{alias:"open_addons"}),g(),f(!1,"Print...",{alias:"print_page"}),f(!1,"Save page as...",{alias:"save_page"}),f(!1,"Find in page...",{alias:"search_page"}),d(!1,"Zoom",null,()=>{}),g(),d(!0,"Settings",null,()=>new K("about:preferences",!0)),p(!0,"More tools","tools"),p(!1,"Help","help"),g(),d(!1,"Quit",null,()=>{})))}),j(()=>{m.bookmarks[1](w("bookmarks",E("Bookmarks"),(()=>{const k=Te.cloneNode(!0),h=k.firstChild;return v(h,()=>f(!0,"Bookmark current tab",{alias:"bookmark_tab"}),null),v(h,()=>d(!1,"Search bookmarks",null,()=>{}),null),v(h,()=>d(!0,U(()=>xe()?"Hide bookmarks toolbar":"Show bookmarks toolbar"),null,()=>{Le(!xe())}),null),v(h,()=>g("Recent Bookmarks"),null),v(h,(()=>{const I=U(()=>ne().length>0);return()=>I()?ne().map(O=>d(!0,[(()=>{const T=Me.cloneNode(!0),W=T.firstChild;return z(()=>se(W,"src",O.icon)),T})(),(()=>{const T=Pe.cloneNode(!0);return v(T,()=>O.title),T})()],null,()=>new window.parent.Velocity.Tab(O.url,!0))):d(!1,"(Empty)",null,()=>{},"pointer-events-none")})(),null),k})(),g(),d(!0,"Manage Bookmarks",null,()=>new K("about:bookmarks",!0))))});const $=864e5,C=10;let N=X([]);return j(()=>{s[0]()==="history"&&it.history.get().then(k=>{let h=Date.now();N[1](k.filter(I=>Math.abs(h-I.timestamp)<=$).sort((I,O)=>O.timestamp-I.timestamp).slice(0,C))}),m.history[1](w("history",E("History"),(()=>{const k=Te.cloneNode(!0),h=k.firstChild;return v(h,()=>p(!1,"Recently closed tabs","recentTabs"),null),v(h,()=>p(!1,"Recently closed windows","recentWindows"),null),v(h,()=>d(!1,"Restore previous session",null,()=>{}),null),v(h,g,null),v(h,()=>d(!1,"Clear Recent History",null,()=>{}),null),v(h,()=>g("Recent History"),null),v(h,(()=>{const I=U(()=>N[0]().length>0);return()=>I()?N[0]().map(O=>d(!0,[(()=>{const T=Me.cloneNode(!0),W=T.firstChild;return z(()=>se(W,"src",O.favicon)),T})(),(()=>{const T=Pe.cloneNode(!0);return v(T,()=>O.title),T})()],null,()=>new window.parent.Velocity.Tab(O.url,!0))):d(!1,"(Empty)",null,()=>{},"pointer-events-none")})(),null),k})(),g(),d(!0,"Manage History",null,()=>new K("about:history",!0))))}),j(()=>{m.tools[1](w("tools",E("More Tools"),d(!1,"Customize toolbar...",null,()=>{}),g("Browser tools"),f(!0,"Web Developer Tools",{alias:"open_devtools"}),d(!1,"Task Manager",null,()=>{}),d(!1,"Remote Debugging",null,()=>{}),d(!1,"Browser Console",null,()=>{}),d(!1,"Responsive Debugging",null,()=>{}),d(!1,"Eyedropper",null,()=>{}),f(!0,"Page Source",{alias:"view_source"}),d(!1,"Extensions for developers",null,()=>{})))}),(()=>{const k=Qt.cloneNode(!0),h=k.firstChild,I=h.firstChild,O=I.nextSibling,T=O.nextSibling,W=T.firstChild,J=h.nextSibling,ue=J.firstChild,q=ue.nextSibling,De=J.nextSibling,pe=De.firstChild,l=pe.nextSibling;l.firstChild,I.$$click=t,O.$$click=r,T.$$click=e;const u=n;return typeof u=="function"?$e(u,q):n=q,l.$$click=b=>{a.contains(b.target)||(s[1](A=>A===null?"main":null),c.push("main"))},v(l,o,null),z(b=>{const A=`fa-light ${M()?.loading()?"fa-xmark":"fa-rotate-right"} mt-[2px]`,y=`Search with ${at[Be()["search.defaults.searchEngine"]||"google"].name} or enter address`;return A!==b._v$&&F(W,b._v$=A),y!==b._v$2&&se(q,"placeholder",b._v$2=y),b},{_v$:void 0,_v$2:void 0}),z(()=>q.value=M()?.search()!==!1?M()?.search():ut(M()?.url()||"")),k})()}G(["click"]);const er=D('<main class="flex h-full flex-col overflow-hidden"><div id="navigator-toolbox-background"><div id="navigator-toolbox"></div></div><main id="content" class="relative w-full flex-1 bg-white"></main></main>');function sr(){return Z(async()=>{await te(()=>import("./registerSW.d2dc8ec2.js"),[]),await te(()=>import("./registerKeybinds.2079fa2e.js"),["assets/registerKeybinds.2079fa2e.js","assets/index.23d2c538.js","assets/index.37d4b482.css","assets/index.5c288931.js","assets/BareClient.06787bc0.js","assets/url.8f0b591e.js"]),await te(()=>import("./addonStoreModifier.e6e1c9d0.js"),["assets/addonStoreModifier.e6e1c9d0.js","assets/index.5c288931.js","assets/BareClient.06787bc0.js","assets/index.23d2c538.js","assets/index.37d4b482.css","assets/url.8f0b591e.js"]),await te(()=>import("./index.5c288931.js").then(e=>e.i),["assets/index.5c288931.js","assets/BareClient.06787bc0.js","assets/index.23d2c538.js","assets/index.37d4b482.css","assets/url.8f0b591e.js"]),window.addEventListener("keydown",ct),addEventListener("beforeunload",e=>{const r=JSON.parse(localStorage.getItem("preferences")||"{}");if(fe().length>1&&r["general.tabs.confirmBeforeClosing"])return e.preventDefault(),e.returnValue="Confirm before closing multiple tabs"},{capture:!0})}),(()=>{const e=er.cloneNode(!0),r=e.firstChild,t=r.firstChild,n=r.nextSibling;return v(e,_(st,{children:"Velocity"}),r),v(t,_(zt,{}),null),v(t,_(Zt,{}),null),v(t,_(At,{}),null),v(e,_(dt,{}),n),v(n,_(Nt,{})),e})()}export{sr as default};
