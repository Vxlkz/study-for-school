import{c as l,j as g,K as i,L as f,l as u,x as b,I as w,t as d}from"./index.23d2c538.js";import{B as h}from"./BareClient.06787bc0.js";const m=d('<div class="h-full w-full bg-cover bg-no-repeat"></div>');function R(t){const[s,e]=l(/^data:/.test(t.src())?void 0:t.src());return g(()=>{const n=new AbortController;if(/^data:/.test(t.src()))return e(t.src());try{new URL(t.src())}catch{return}if(new URL(t.src()).origin===location.origin)return e(t.src());if(!i()){const o=typeof window.__uv$config.bare=="string"?window.__uv$config.bare:window.__uv$config.bare[Math.floor(Math.random()*window.__uv$config.bare.length)];f(new h(new URL(o,location.toString())))}const r=(async()=>{try{const a=await(await i().fetch(t.src(),{signal:n.signal})).blob();if(!/image/.test(a.type))e("/icons/earth.svg");else{const c=URL.createObjectURL(a);return e(c),c}}catch{try{const a=await(await i().fetch(`https://www.google.com/s2/favicons?domain=${t.src()}&sz=64`,{signal:n.signal})).blob();if(!/image/.test(a.type))e("/icons/earth.svg");else{const c=URL.createObjectURL(a);return e(c),c}}catch{}}})();u(()=>{n.abort(),r?.then(o=>o?URL.revokeObjectURL(o):null)})}),(()=>{const n=m.cloneNode(!0);return b(r=>w(n,`background-image: url("${s()}")`,r)),n})()}export{R as F};
